@import (reference) '../../../../../style/color.less';
@import (reference) '../../../../../style/typography.less';

gux-input-textarea {
  position: relative;
  display: block;

  .gux-resize-none {
    textarea {
      resize: none;
    }
  }

  .gux-resize-auto {
    // https://codepen.io/chriscoyier/pen/XWKEVLy

    /* easy way to plop the elements on top of each other and have them both sized based on the tallest one's height */
    display: grid;

    &::after {
      /* Place on top of each other */
      grid-row-start: 1;
      grid-row-end: 2;
      grid-column-start: 1;
      grid-column-end: 2;
      padding: 4px 12px 4px 12px;
      margin: 0;

      /* This is how textarea text behaves */
      white-space: pre-wrap;

      /* Hidden from view, clicks, and screen readers */
      visibility: hidden;

      /* Note the weird space! Needed to preventy jumpy behavior */
      content: attr(data-replicated-value) ' ';
    }

    textarea {
      /* Place on top of each other */
      grid-row-start: 1;
      grid-row-end: 2;
      grid-column-start: 1;
      grid-column-end: 2;

      /* Firefox shows scrollbar on growth, you can hide like this. */
      overflow: hidden;

      /* You could leave this, but after a user resizes, then it ruins the auto sizing */
      resize: none;
    }
  }

  textarea {
    flex: 1 1 auto;
    align-self: auto;
    order: 0;
    min-width: 100%;
    max-width: 100%;
    min-height: (@base-line-height + 1) * 4;
    padding: 4px 12px 4px 12px;
    margin: 0;
    font-family: inherit;
    font-size: 12px;
    line-height: 1.66666667;
    color: @gux-black-50;
    background-color: @gux-grey-90;
    background-image: none;
    border: 1px solid @gux-black-100;
    border-radius: 2px;
    outline: none;
    box-shadow: inset 0 0 4px fade(@gux-black-30, 16%);

    &::placeholder {
      color: @gux-black-90;
      opacity: 1;
    }

    &:focus-within {
      border-color: @gux-blue-60;
      box-shadow: 0 0 4px fade(@gux-blue-80, 50%);
    }

    &[disabled] {
      opacity: 0.5;
    }
  }
}
