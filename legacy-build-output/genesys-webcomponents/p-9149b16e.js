function t(t){return t.split("-")[1]}function n(t){return"y"===t?"height":"width"}function e(t){return t.split("-")[0]}function o(t){return["top","bottom"].includes(e(t))?"x":"y"}function r(r,i,a){let{reference:l,floating:c}=r;const s=l.x+l.width/2-c.width/2,u=l.y+l.height/2-c.height/2,f=o(i),d=n(f),m=l[d]/2-c[d]/2,y="x"===f;let p;switch(e(i)){case"top":p={x:s,y:l.y-c.height};break;case"bottom":p={x:s,y:l.y+l.height};break;case"right":p={x:l.x+l.width,y:u};break;case"left":p={x:l.x-c.width,y:u};break;default:p={x:l.x,y:l.y}}switch(t(i)){case"start":p[f]-=m*(a&&y?-1:1);break;case"end":p[f]+=m*(a&&y?-1:1)}return p}function i(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function a(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function l(t,n){var e;void 0===n&&(n={});const{x:o,y:r,platform:l,rects:c,elements:s,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:y=!1,padding:p=0}=n,h=i(p),x=s[y?"floating"===m?"reference":"floating":m],g=a(await l.getClippingRect({element:null==(e=await(null==l.isElement?void 0:l.isElement(x)))||e?x:x.contextElement||await(null==l.getDocumentElement?void 0:l.getDocumentElement(s.floating)),boundary:f,rootBoundary:d,strategy:u})),w="floating"===m?{...c.floating,x:o,y:r}:c.reference,v=await(null==l.getOffsetParent?void 0:l.getOffsetParent(s.floating)),b=await(null==l.isElement?void 0:l.isElement(v))&&await(null==l.getScale?void 0:l.getScale(v))||{x:1,y:1},A=a(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:v,strategy:u}):w);return{top:(g.top-A.top+h.top)/b.y,bottom:(A.bottom-g.bottom+h.bottom)/b.y,left:(g.left-A.left+h.left)/b.x,right:(A.right-g.right+h.right)/b.x}}const c=Math.min,s=Math.max;function u(t,n,e){return s(t,c(n,e))}const f=e=>({name:"arrow",options:e,async fn(r){const{element:a,padding:l=0}=e||{},{x:c,y:s,placement:f,rects:d,platform:m,elements:y}=r;if(null==a)return{};const p=i(l),h={x:c,y:s},x=o(f),g=n(x),w=await m.getDimensions(a),v="y"===x,b=v?"top":"left",A=v?"bottom":"right",R=v?"clientHeight":"clientWidth",k=d.reference[g]+d.reference[x]-h[x]-d.floating[g],F=h[x]-d.reference[x],P=await(null==m.getOffsetParent?void 0:m.getOffsetParent(a));let S=P?P[R]:0;S&&await(null==m.isElement?void 0:m.isElement(P))||(S=y.floating[R]||d.floating[g]);const z=p[b],D=S-w[g]-p[A],M=S/2-w[g]/2+(k/2-F/2),T=u(z,M,D),B=null!=t(f)&&M!=T&&d.reference[g]/2-(M<z?p[b]:p[A])-w[g]/2<0;return{[x]:h[x]-(B?M<z?z-M:D-M:0),data:{[x]:T,centerOffset:M-T}}}}),d={left:"right",right:"left",bottom:"top",top:"bottom"};function m(t){return t.replace(/left|right|bottom|top/g,(t=>d[t]))}const y={start:"end",end:"start"};function p(t){return t.replace(/start|end/g,(t=>y[t]))}const h=function(r){return void 0===r&&(r={}),{name:"flip",options:r,async fn(i){var a;const{placement:c,middlewareData:s,rects:u,initialPlacement:f,platform:d,elements:y}=i,{mainAxis:h=!0,crossAxis:x=!0,fallbackPlacements:g,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...A}=r,R=e(c),k=e(f)===f,F=await(null==d.isRTL?void 0:d.isRTL(y.floating)),P=g||(k||!b?[m(f)]:function(t){const n=m(t);return[p(t),n,p(n)]}(f));g||"none"===v||P.push(...function(n,o,r,i){const a=t(n);let l=function(t,n,e){const o=["left","right"],r=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return e?n?r:o:n?o:r;case"left":case"right":return n?i:a;default:return[]}}(e(n),"start"===r,i);return a&&(l=l.map((t=>t+"-"+a)),o&&(l=l.concat(l.map(p)))),l}(f,b,v,F));const S=[f,...P],z=await l(i,A),D=[];let M=(null==(a=s.flip)?void 0:a.overflows)||[];if(h&&D.push(z[R]),x){const{main:e,cross:r}=function(e,r,i){void 0===i&&(i=!1);const a=t(e),l=o(e),c=n(l);let s="x"===l?a===(i?"end":"start")?"right":"left":"start"===a?"bottom":"top";return r.reference[c]>r.floating[c]&&(s=m(s)),{main:s,cross:m(s)}}(c,u,F);D.push(z[e],z[r])}if(M=[...M,{placement:c,overflows:D}],!D.every((t=>t<=0))){var T,B;const t=((null==(T=s.flip)?void 0:T.index)||0)+1,n=S[t];if(n)return{data:{index:t,overflows:M},reset:{placement:n}};let e=null==(B=M.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])?void 0:B.placement;if(!e)switch(w){case"bestFit":{var L;const t=null==(L=M.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:L[0];t&&(e=t);break}case"initialPlacement":e=f}if(c!==e)return{reset:{placement:e}}}return{}}}},x=function(n){return void 0===n&&(n=0),{name:"offset",options:n,async fn(r){const{x:i,y:a}=r,l=await async function(n,r){const{placement:i,platform:a,elements:l}=n,c=await(null==a.isRTL?void 0:a.isRTL(l.floating)),s=e(i),u=t(i),f="x"===o(i),d=["left","top"].includes(s)?-1:1,m=c&&f?-1:1,y="function"==typeof r?r(n):r;let{mainAxis:p,crossAxis:h,alignmentAxis:x}="number"==typeof y?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return u&&"number"==typeof x&&(h="end"===u?-1*x:x),f?{x:h*m,y:p*d}:{x:p*d,y:h*m}}(r,n);return{x:i+l.x,y:a+l.y,data:l}}}},g=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(n){const{x:r,y:i,placement:a}=n,{mainAxis:c=!0,crossAxis:s=!1,limiter:f={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...d}=t,m={x:r,y:i},y=await l(n,d),p=o(e(a)),h="x"===p?"y":"x";let x=m[p],g=m[h];c&&(x=u(x+y["y"===p?"top":"left"],x,x-y["y"===p?"bottom":"right"])),s&&(g=u(g+y["y"===h?"top":"left"],g,g-y["y"===h?"bottom":"right"]));const w=f.fn({...n,[p]:x,[h]:g});return{...w,data:{x:w.x-r,y:w.y-i}}}}},w=function(n){return void 0===n&&(n={}),{name:"size",options:n,async fn(r){const{placement:i,rects:a,platform:u,elements:f}=r,{apply:d=(()=>{}),...m}=n,y=await l(r,m),p=e(i),h=t(i),x="x"===o(i),{width:g,height:w}=a.floating;let v,b;"top"===p||"bottom"===p?(v=p,b=h===(await(null==u.isRTL?void 0:u.isRTL(f.floating))?"start":"end")?"left":"right"):(b=p,v="end"===h?"top":"bottom");const A=w-y[v],R=g-y[b],k=!r.middlewareData.shift;let F=A,P=R;if(x){const t=g-y.left-y.right;P=h||k?c(R,t):t}else{const t=w-y.top-y.bottom;F=h||k?c(A,t):t}if(k&&!h){const t=s(y.left,0),n=s(y.right,0),e=s(y.top,0),o=s(y.bottom,0);x?P=g-2*(0!==t||0!==n?t+n:s(y.left,y.right)):F=w-2*(0!==e||0!==o?e+o:s(y.top,y.bottom))}await d({...r,availableWidth:P,availableHeight:F});const S=await u.getDimensions(f.floating);return g!==S.width||w!==S.height?{reset:{rects:!0}}:{}}}};function v(t){var n;return(null==(n=t.ownerDocument)?void 0:n.defaultView)||window}function b(t){return v(t).getComputedStyle(t)}function A(t){return t instanceof v(t).Node}function R(t){return A(t)?(t.nodeName||"").toLowerCase():""}let k;function F(){if(k)return k;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(k=t.brands.map((t=>t.brand+"/"+t.version)).join(" "),k):navigator.userAgent}function P(t){return t instanceof v(t).HTMLElement}function S(t){return t instanceof v(t).Element}function z(t){return"undefined"!=typeof ShadowRoot&&(t instanceof v(t).ShadowRoot||t instanceof ShadowRoot)}function D(t){const{overflow:n,overflowX:e,overflowY:o,display:r}=b(t);return/auto|scroll|overlay|hidden|clip/.test(n+o+e)&&!["inline","contents"].includes(r)}function M(t){return["table","td","th"].includes(R(t))}function T(t){const n=/firefox/i.test(F()),e=b(t),o=e.backdropFilter||e.WebkitBackdropFilter;return"none"!==e.transform||"none"!==e.perspective||!!o&&"none"!==o||n&&"filter"===e.willChange||n&&!!e.filter&&"none"!==e.filter||["transform","perspective"].some((t=>e.willChange.includes(t)))||["paint","layout","strict","content"].some((t=>{const n=e.contain;return null!=n&&n.includes(t)}))}function B(){return/^((?!chrome|android).)*safari/i.test(F())}function L(t){return["html","body","#document"].includes(R(t))}const C=Math.min,O=Math.max,E=Math.round;function H(t){const n=b(t);let e=parseFloat(n.width),o=parseFloat(n.height);const r=P(t),i=r?t.offsetWidth:e,a=r?t.offsetHeight:o,l=E(e)!==i||E(o)!==a;return l&&(e=i,o=a),{width:e,height:o,fallback:l}}function N(t){return S(t)?t:t.contextElement}const W={x:1,y:1};function j(t){const n=N(t);if(!P(n))return W;const e=n.getBoundingClientRect(),{width:o,height:r,fallback:i}=H(n);let a=(i?E(e.width):e.width)/o,l=(i?E(e.height):e.height)/r;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}function q(t,n,e,o){var r,i;void 0===n&&(n=!1),void 0===e&&(e=!1);const l=t.getBoundingClientRect(),c=N(t);let s=W;n&&(o?S(o)&&(s=j(o)):s=j(t));const u=c?v(c):window,f=B()&&e;let d=(l.left+(f&&(null==(r=u.visualViewport)?void 0:r.offsetLeft)||0))/s.x,m=(l.top+(f&&(null==(i=u.visualViewport)?void 0:i.offsetTop)||0))/s.y,y=l.width/s.x,p=l.height/s.y;if(c){const t=v(c),n=o&&S(o)?v(o):o;let e=t.frameElement;for(;e&&o&&n!==t;){const t=j(e),n=e.getBoundingClientRect(),o=getComputedStyle(e);n.x+=(e.clientLeft+parseFloat(o.paddingLeft))*t.x,n.y+=(e.clientTop+parseFloat(o.paddingTop))*t.y,d*=t.x,m*=t.y,y*=t.x,p*=t.y,d+=n.x,m+=n.y,e=v(e).frameElement}}return a({width:y,height:p,x:d,y:m})}function V(t){return((A(t)?t.ownerDocument:t.document)||window.document).documentElement}function X(t){return S(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Y(t){return q(V(t)).left+X(t).scrollLeft}function _(t){if("html"===R(t))return t;const n=t.assignedSlot||t.parentNode||z(t)&&t.host||V(t);return z(n)?n.host:n}function G(t){const n=_(t);return L(n)?n.ownerDocument.body:P(n)&&D(n)?n:G(n)}function I(t,n){var e;void 0===n&&(n=[]);const o=G(t),r=o===(null==(e=t.ownerDocument)?void 0:e.body),i=v(o);return r?n.concat(i,i.visualViewport||[],D(o)?o:[]):n.concat(o,I(o))}function J(t,n,e){let o;if("viewport"===n)o=function(t,n){const e=v(t),o=V(t),r=e.visualViewport;let i=o.clientWidth,a=o.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;const t=B();(!t||t&&"fixed"===n)&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l,y:c}}(t,e);else if("document"===n)o=function(t){const n=V(t),e=X(t),o=t.ownerDocument.body,r=O(n.scrollWidth,n.clientWidth,o.scrollWidth,o.clientWidth),i=O(n.scrollHeight,n.clientHeight,o.scrollHeight,o.clientHeight);let a=-e.scrollLeft+Y(t);const l=-e.scrollTop;return"rtl"===b(o).direction&&(a+=O(n.clientWidth,o.clientWidth)-r),{width:r,height:i,x:a,y:l}}(V(t));else if(S(n))o=function(t,n){const e=q(t,!0,"fixed"===n),o=e.top+t.clientTop,r=e.left+t.clientLeft,i=P(t)?j(t):{x:1,y:1};return{width:t.clientWidth*i.x,height:t.clientHeight*i.y,x:r*i.x,y:o*i.y}}(n,e);else{const e={...n};if(B()){var r,i;const n=v(t);e.x-=(null==(r=n.visualViewport)?void 0:r.offsetLeft)||0,e.y-=(null==(i=n.visualViewport)?void 0:i.offsetTop)||0}o=e}return a(o)}function K(t,n){return P(t)&&"fixed"!==b(t).position?n?n(t):t.offsetParent:null}function Q(t,n){const e=v(t);if(!P(t))return e;let o=K(t,n);for(;o&&M(o)&&"static"===b(o).position;)o=K(o,n);return o&&("html"===R(o)||"body"===R(o)&&"static"===b(o).position&&!T(o))?e:o||function(t){let n=_(t);for(;P(n)&&!L(n);){if(T(n))return n;n=_(n)}return null}(t)||e}function U(t,n,e){const o=P(n),r=V(n),i=q(t,!0,"fixed"===e,n);let a={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(o||!o&&"fixed"!==e)if(("body"!==R(n)||D(r))&&(a=X(n)),P(n)){const t=q(n,!0);l.x=t.x+n.clientLeft,l.y=t.y+n.clientTop}else r&&(l.x=Y(r));return{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}const Z={getClippingRect:function(t){let{element:n,boundary:e,rootBoundary:o,strategy:r}=t;const i=[..."clippingAncestors"===e?function(t,n){const e=n.get(t);if(e)return e;let o=I(t).filter((t=>S(t)&&"body"!==R(t))),r=null;const i="fixed"===b(t).position;let a=i?_(t):t;for(;S(a)&&!L(a);){const t=b(a),n=T(a);"fixed"===t.position&&(r=null),(i?n||r:n||"static"!==t.position||!r||!["absolute","fixed"].includes(r.position))?r=t:o=o.filter((t=>t!==a)),a=_(a)}return n.set(t,o),o}(n,this._c):[].concat(e),o],a=i.reduce(((t,e)=>{const o=J(n,e,r);return t.top=O(o.top,t.top),t.right=C(o.right,t.right),t.bottom=C(o.bottom,t.bottom),t.left=O(o.left,t.left),t}),J(n,i[0],r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:n,offsetParent:e,strategy:o}=t;const r=P(e),i=V(e);if(e===i)return n;let a={scrollLeft:0,scrollTop:0},l={x:1,y:1};const c={x:0,y:0};if((r||!r&&"fixed"!==o)&&(("body"!==R(e)||D(i))&&(a=X(e)),P(e))){const t=q(e);l=j(e),c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-a.scrollLeft*l.x+c.x,y:n.y*l.y-a.scrollTop*l.y+c.y}},isElement:S,getDimensions:function(t){return H(t)},getOffsetParent:Q,getDocumentElement:V,getScale:j,async getElementRects(t){let{reference:n,floating:e,strategy:o}=t;const r=this.getOffsetParent||Q,i=this.getDimensions;return{reference:U(n,await r(e),o),floating:{x:0,y:0,...await i(e)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===b(t).direction};function $(t,n,e,o){void 0===o&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=!0,animationFrame:l=!1}=o,c=r&&!l,s=c||i?[...S(t)?I(t):t.contextElement?I(t.contextElement):[],...I(n)]:[];s.forEach((t=>{c&&t.addEventListener("scroll",e,{passive:!0}),i&&t.addEventListener("resize",e)}));let u,f=null;a&&(f=new ResizeObserver((()=>{e()})),S(t)&&!l&&f.observe(t),S(t)||!t.contextElement||l||f.observe(t.contextElement),f.observe(n));let d=l?q(t):null;return l&&function n(){const o=q(t);!d||o.x===d.x&&o.y===d.y&&o.width===d.width&&o.height===d.height||e(),d=o,u=requestAnimationFrame(n)}(),e(),()=>{var t;s.forEach((t=>{c&&t.removeEventListener("scroll",e),i&&t.removeEventListener("resize",e)})),null==(t=f)||t.disconnect(),f=null,l&&cancelAnimationFrame(u)}}const tt=(t,n,e)=>{const o=new Map,i={platform:Z,...e},a={...i.platform,_c:o};return(async(t,n,e)=>{const{placement:o="bottom",strategy:i="absolute",middleware:a=[],platform:l}=e,c=a.filter(Boolean),s=await(null==l.isRTL?void 0:l.isRTL(n));let u=await l.getElementRects({reference:t,floating:n,strategy:i}),{x:f,y:d}=r(u,o,s),m=o,y={},p=0;for(let e=0;e<c.length;e++){const{name:a,fn:h}=c[e],{x,y:g,data:w,reset:v}=await h({x:f,y:d,initialPlacement:o,placement:m,strategy:i,middlewareData:y,rects:u,platform:l,elements:{reference:t,floating:n}});f=null!=x?x:f,d=null!=g?g:d,y={...y,[a]:{...y[a],...w}},v&&p<=50&&(p++,"object"==typeof v&&(v.placement&&(m=v.placement),v.rects&&(u=!0===v.rects?await l.getElementRects({reference:t,floating:n,strategy:i}):v.rects),({x:f,y:d}=r(u,m,s))),e=-1)}return{x:f,y:d,placement:m,strategy:i,middlewareData:y}})(t,n,{...i,platform:a})};export{$ as a,f as b,tt as c,w as d,h as f,x as o,g as s}